services:
  - type: web
    name: notediscovery-demo
    env: docker
    
    # OPTION 1: Pull pre-built image from GHCR (Recommended - faster, consistent)
    # Uses images built by GitHub Actions and published to ghcr.io
    # Deployment: Click "Manual Deploy" in Render Dashboard to pull latest
    image:
      url: ghcr.io/gamosoft/notediscovery:latest
    
    # OPTION 2: Build from source (Fallback if GHCR unavailable)
    # Comment out 'image' above and uncomment these lines to build on Render:
    # dockerfilePath: ./Dockerfile
    # dockerContext: .
    
    plan: free
    region: oregon
    healthCheckPath: /health
    envVars:
      - key: PORT
        value: 8000
      - key: DEMO_MODE
        value: "true"
      - key: AUTHENTICATION_ENABLED
        value: "true"
      
      # ⚠️ DEMO CREDENTIALS - DO NOT USE IN PRODUCTION! ⚠️
      # These are public demo credentials for testing only.
      # Password: "admin"
      - key: AUTHENTICATION_PASSWORD_HASH
        value: "$2b$12$t/6PGExFzdpU2PUta0iVY.eDQwvu63kH.c/d4bEnnHaQ5CspH1yrG"
      
      # ⚠️ PUBLIC SECRET KEY - DEMO ONLY! ⚠️
      # For production, generate a new key with:
      # python -c "import secrets; print(secrets.token_hex(32))"
      - key: AUTHENTICATION_SECRET_KEY
        value: "4f36da5af76627301dcdc0347c4b111bdc6c86ae830444af852de935198c3210"
    
    # Manual deployment only
    autoDeploy: false